--------------------------
CS685A ASSIGNMENT 1 README
--------------------------

Assignment 1 for CS685A: Data Mining by Sharanya Saha (21111056).
The assignment is coded in python 3.8.10 and requires the installation of the following packages:
	1. numpy
	2. pandas
	3. DateTime
The required packages can be installed using the following command:
	pip install -r requirements.txt	


ALERT: assign1.sh runs the complete assignment (Q1 to Q9) and takes around 1 minute and 30 seconds. It shows some warnings in the terminal, Kindly ignore them.

To make the scripts executable please run the command chmod u+x scriptname.sh
To run the scripts write ./scriptname.sh in the terminal.

NOTE: There are a few dependencies in the program, kindly execute the individual files considering the below mentioned dependencies.
	Q2 is dependent on Q1 (execute neighbor-districts-modified.sh and then edge-generator.sh)
	Q4 is dependent on Q3 (execute case-generator.sh and then peaks-generator.sh)
	Q9 is dependent on Q5 and Q8 (execute complete-vaccination-generator.sh after the execution of vaccinated-count-generator.sh and vaccinated-ratio-generator.sh)
	

--------
CONTENTS
--------
   
	1. The folder contains 22 files and 2 folders named datasets and Outputs
		1.1. 10 shell files
		1.2. 10 Python files
		1.3. 2 txt files 
			1.3.1. README
			1.3.2. requirements.txt
		1.4. Folders
			1.4.1. datasets
			1.4.2. Outputs
		
		
The folder 'datasets' contains all the 6 input files required for execution :
1. neighbor-districts.json
2. districts.csv (Contains 'Districtwise timeseries of Confirmed, Recovered and Deceased numbers' downloaded from:  https://data.covid19india.org/csv/latest/districts.csv )
3. cowin_vaccine_data_districtwise.csv (Contains 'Districtwise vaccination data' downloaded from: https://data.covid19india.org/)
4. DDW_PCA0000_2011_Indiastatedist.xlsx (Contains population data from 2011 Census downloaded from: http://censusindia.gov.in/pca/DDW_PCA0000_2011_Indiastatedist.xlsx )
5. district_wise.csv (Is only used for district and district_id mapping and is downloaded from: https://data.covid19india.org/)
6. Spelling.csv (This csv file is created by me for handling the spelling mismatches in neighbor-districts.json and cowin_data. It contains corrected spellings for 89 districts and was done manually)

The folder 'Outputs' will contain the resultant csv generated by the code.

--------------------------------------------------
QUESTION WISE INPUT, EXECUTABLE AND OUTPUT FILES : 
--------------------------------------------------

		
Question 1:
-----------


-> Input files:
	-> neighbor-districts.json
	-> cowin_vaccine_data_districtwise.csv
	-> Spelling.csv
-> Executable file: neighbor-districts-modified.sh (which calls DM_Q1.py)
-> Output file: neighbor-districts-modified.json

Intersection of neighbor-districts.json and cowin data is taken. All the district names are replaced with their unique district_ids from cowin data. Districts with same names but belonging to different states are also handled by the code. Mumbai city and Mumbai suburban are merged in neighbor data. Konkan, Niwari and Noklak are dropped from the neighbor data. Bijapur from Karnataka is renamed to 'Vijayapura' inorder to match with cowin data.  Apart from these there were 89 spelling mismatches between neighbor data and vaccine data which I have corrected manually in Spelling.csv and have used the same in the code. The district names are replaced by their district_ids from cowin data.


Question 2:
-----------

-> Input file: neighbor-districts-modified.json
-> Executable file: edge-generator.sh (calls DM_Q2.py)
-> Output file: edge-graph.csv

This code generates the undirected graph of neighbouring districts in edge list format. It takes the output file of Question 1 as input (neighbor-districts-modified.json)


Question 3:
-----------

-> Input files:
	-> districts.csv
	-> district_wise.csv
-> Executable file: case-generator.sh (which calls DM_Q3.py) 
-> Output files:
	-> cases-overall.csv
	-> cases-week.csv
	-> cases-month.csv

district_wise.csv is only used to replace the district names with their district_ids. A few districts have same names, they are handled by considering their states and replacing with their unique district_id. Data from 26/04/2020 to 14/08/2021 is taken into account as districts.csv contained data from 26/04/2020. Overlapping weeks are considered for calculating weekly cases as the output files are further used to generate weekly peaks. Additionally, case-generator.sh also executes DM_Helper_Q4.py which generates 2 other csv files named cases-week-statewise.csv and cases-month-statewise.csv. cases-week-statewise.csv contains weekly cases for each state and cases-month-statewise.csv contains monthly cases for each state. These two files are only created to generate weekly and monthly state peaks for Question 4.


Question 4:
-----------

-> Input files:
	-> cases-week.csv
	-> cases-month.csv
	-> cases-week-statewise.csv
	-> cases-month-statewise.csv
-> Executable file: peaks-generator.sh (which calls DM_Q4.py)
-> Output files:
	-> districts-peaks.csv
	-> state-peaks.csv
	->overall-peaks.csv

The time frame for wave1 is taken as mid May 2020 to November 2020 and the time frame for wave2 is taken as mid March 2021 to May 2021. The week or month with maximnum number of cases is considered as weekly or a monthly peak respectively. All the input files required for this are generated by (Question 3) case-generator.sh. Kindly, execute this after executing case-generator.sh. So, assumptions from question 3 will also follow.


Question 5:
-----------

-> Input files: cowin_vaccine_data_districtwise.csv
-> Executable file: vaccinated-count-generator.sh (which calls DM_Q5.py)
-> Output files:
	-> district-vaccinated-overall.csv
	-> district-vaccinated-monthly.csv
	-> district-vaccinated-weekly.csv
	-> state-vaccinated-overall.csv
	-> state-vaccinated-monthly.csv
	-> state-vaccinated-weekly.csv

A few districts have same district_ids, data for such districts are merged. The first week (Week 1)  contains data from 16/01/2021(Saturday) to 23/01/2021. Rest of the weeks start on Sunday and run till Saturday. A few districts have same district_ids, data for such districts are merged.


Question 6:
-----------	

-> Input files: 
	-> DDW_PCA0000_2011_Indiastatedist.xlsx
	-> cowin_vaccine_data_districtwise.csv
-> Executable file: vaccination-population-ratio-generator.sh (which calls DM_Q6.py)
-> Output files:
	-> distric-vaccination-population-ratio.csv
	-> state-vaccination-population-ratio.csv
	-> overall-vaccination-population-ratio.csv

In order to match census data and cowin data dadra nagar haveli and daman and diu are merged. A few other corrections are made in the names of the states. Districts like Paschim Bardhaman and Purba Bardhaman are merged in cowin data in order to match with census data. Spelling mismatches between the two datasets are handled manually by the code. Districts of Ladakh and Telengana are dropped from cowin data because of their unavailabilty in census data.


Question 7:
-----------

-> Input files: cowin_vaccine_data_districtwise.csv
-> Executable file: vaccine-type-ratio-generator.sh (which calls DM_Q7.py)
-> Output files:
	-> state-vaccine-type-ratio.csv
	-> overall-vaccine-type-ratio.csv
	-> district-vaccine-type-ratio.csv

For 49 districts the vaccine-ratio(covishiels : covaxin) is inf, as the number of covaxin vaccinated people for these districts are zero.


Question 8:
-----------

-> Input files: 
	-> DDW_PCA0000_2011_Indiastatedist.xlsx
	-> cowin_vaccine_data_districtwise.csv
-> Executable file: vaccinated-ratio-generator.sh (which calls DM_Q8.py)
-> Output files:
	-> state-vaccinated-dose-ratio.csv
	-> overall-vaccinated-dose-ratio.csv
	-> district-vaccinated-dose-ratio.csv

In order to match census data and cowin data dadra nagar haveli and daman and diu are merged. A few other corrections are made in the names of the states. Districts like Paschim Bardhaman and Purba Bardhaman are merged in cowin data in order to match with census data. Spelling mismatches between the two datasets are handled manually by the code. Districts of Ladakh and Telengana are dropped from cowin data because of their unavailabilty in census data. Apart from the required output files the code also creates a 'statewise_vaccinated.csv' which contains the total population and the number of people vaccinated by atleast one dose for each state. This csv is generated as a helper for Question 9.


Question 9:
-----------

-> Input files:
	-> statewise_vaccinated.csv (generated by Question 8)
	-> state-vaccinated-weekly.csv (generated by Question 5)
-> Executable file: complete-vaccination-generator.sh (which calls DM_Q9.py)
-> Output file: complete-vaccination.csv

This file gives the expected date of dose1 completion for each state. Due to unavailabilty of population data for Ladakh and Telengana, the expected completion date of dose1 for these states cannot be predicted. The input files for this code are generated by Question 8 (vaccinated-ratio-generator.sh) and Question 5 (vaccinated-count-generator.sh). Kindly, execute this code after execution of Question 5 and Question 8.


---------
RUN TIME:
---------
The runtime for assign1.sh in personal system is around 1 min 30 seconds. Please let the script run for twice the time mentioned in worst case scenario.


----------------
CONTACT DETAILS:
----------------
Sharanya Saha
Roll Number: 21111056
Please contact on sharanya21@iitk.ac.in or sharanyasaha99@gmail.com for any queries.






